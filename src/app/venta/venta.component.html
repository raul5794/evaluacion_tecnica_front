
<br>
<div class="container">

<div class="row">
    <div class="col-6">
    <form (ngSubmit)="onSubmit()" #ventaForm="ngForm" >
        <div class="form-group col-12">           
            <label for="serie">Serie</label>
            <input type="text" required [(ngModel)]="venta.serie" name="serie" #serie="ngModel" id="serie" class="form-control">      
            
        </div>
        <div class="form-group col-12">           
            <label for="numero">Numero</label>
            <input type="text" required [(ngModel)]="venta.numero" name="numero" #numero="ngModel" id="numero" class="form-control">      
            
        </div>
        <div class="form-group col-12">           
            <label for="total">Total</label>
            <input type="text" disabled [(ngModel)]="venta.total" name="total" #total="ngModel" id="total" class="form-control">      
            
        </div>
       
        <div class="form-group col-12">           
            <label for="cliente">Cliente</label>
            <select
          class="form-control"
          id="cliente"
          required
          [(ngModel)]="venta.cliente"
          name="cliente"
          #cliente="ngModel"
        >
          <option *ngFor="let c of clientes" [ngValue]="c">{{ c.nombres }}</option>
        </select> 
            
        </div>
        <div class="form-group col-12">           
            <label for="total"> Vendedor</label>
            <select
            class="form-control"
            id="vendedor"
            required
            [(ngModel)]="venta.vendedor"
            name="vendedor"
            #vendedor="ngModel"
          >
            <option *ngFor="let v of vendedores" [ngValue]="v">{{ v.nombres }}</option>
          </select>      
            
        </div>
      
    </form>
    </div>
    <div class="col-6">

    <div class="col-12">

        <div class="form-group col-12">           
            <label for="serie">Cantidad</label>
            <input type="number" required [(ngModel)]="detalle.cantidad" name="cantidad" #serie="ngModel" id="cantidad" class="form-control">      
            
        </div>
    </div>
    <div class="col-12">

        <div class="form-group col-12">           
            <label for="serie">Precio</label>
            <input type="number" required [(ngModel)]="detalle.precio" name="precio" #serie="ngModel" id="precio" class="form-control">      
            
        </div>
    </div>
    <div class="form-group col-12">           
        <label for="cliente">Producto</label>
        <select
      class="form-control"
      id="producto"      
      [(ngModel)]="detalle.productos"
      name="producto"
      #producto="ngModel"
    >
      <option *ngFor="let p of productos" [ngValue]="p">{{p.descripcion}}</option>
    </select> 
    </div>
    <br>
    <div class=" form-group col-12" >
        <button 
        type="button"
        class="btn btn-primary"
        (click)="onAgregarDetalle()"
      >Agregar Detalle Venta
        </button>
    </div>
</div>
</div>
    <br>
<hr>
<div>
    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Cantidad</th>
                <th scope="col">Precio</th>
                <th scope="col">Producto</th>
                <th scope="col">Sub-Total</th>
                <th scope="col">Eliminar</th>
            </tr>
        </thead>
        <tbody>
            @for (detalle of detalles; track detalle.precio; let i = $index) {
                <tr>
                    <th scope="row">{{ i + 1 }}</th>                    
                    <td>{{ detalle.cantidad| number }}</td>
                    <td>{{ detalle.precio| currency }}</td>
                    <td>{{ detalle.productos.descripcion}}</td>
                    <td>{{ detalle.total| currency }}</td>
                    <button id="remove" (click)="onEliminarDetalle(i)"><i class="bi bi-trash">Eliminar</i></button>
                </tr>
            }
        </tbody>
    </table>

</div>

    <div class="col-3" >
    <button 
    type="button"
    class="btn btn-primary"
    (click)="onSubmit(); ventaForm.reset()"
  >Guardar
    </button>
</div>
</div>
